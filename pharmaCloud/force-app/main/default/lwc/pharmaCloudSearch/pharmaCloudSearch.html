<!-- sldsValidatorIgnore -->
<template>
    <div class="slds-form-element slds-border_bottom slds-var-m-top_small slds-var-m-bottom_x-small">
        <label class="slds-form-element__label" for="combobox-id-1" id="combobox-label-id-35">Search by</label>
        <div class="slds-form-element__control">

          <div class="slds-combobox-group">
            <div class="slds-combobox_object-switcher slds-combobox-addon_start">
              <div class="slds-form-element">
                <label class="slds-form-element__label slds-assistive-text" for="combobox-id-3" id="combobox-label-id-33">Filter Search by:</label>
                <div class="slds-form-element__control">
                  <div class="slds-combobox_container">
                    <div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click" data-id="combo" aria-controls="primary-combobox-id-2">

                      <div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none">
                        <button onclick={handleComboboxclick} data-id="buttonDrop" style="width:9rem" type="button" class="slds-input_faux slds-combobox__input slds-combobox__input-value" aria-labelledby="combobox-label-id-33 combobox-id-3-selected-value" id="combobox-id-3-selected-value" aria-controls="objectswitcher-listbox-id-01"
                          aria-expanded="false" aria-haspopup="listbox">
                          <span  id="combobox-value-id-20">{value}</span>
                        </button>
                        <span class="slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right">
                          <lightning-icon icon-name="utility:down" size="x-small"></lightning-icon>
                        </span>
                      </div>

                      <div id="objectswitcher-listbox-id-01" class="slds-dropdown slds-dropdown_length-5 slds-dropdown_x-small slds-dropdown_left" role="listbox">
                        <ul class="slds-listbox slds-listbox_vertical" role="group" aria-label="Suggested for you">
                         
                          <li role="presentation" class="slds-listbox__item" onclick={handleProductClick}>
                            <div aria-checked="true" id="object1" class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small" role="option">
                              <span class="slds-media__figure slds-listbox__option-icon">
                                <span class="slds-icon_container slds-icon-utility-check slds-current-color">
                                  <template if:true={isProductSelected}>
                                  <lightning-icon icon-name="utility:check" size="xx-small"></lightning-icon>
                                  </template>
                                </span>
                              </span>
                              <span class="slds-media__body">
                                <span class="slds-truncate" title="Accounts">Product</span>
                              </span>
                            </div>
                          </li>
                          <li role="presentation" class="slds-listbox__item" onclick={handleActiveIngredientClick}>
                            <div id="object2" class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small" role="option">
                              <span class="slds-media__figure slds-listbox__option-icon">
                                <span class="slds-icon_container slds-icon-utility-check slds-current-color">
                                  <template if:false={isProductSelected}>
                                  <lightning-icon icon-name="utility:check" size="xx-small"></lightning-icon>
                                  </template>
                                </span>
                              </span>
                              <span class="slds-media__body">
                                <span class="slds-truncate" title="Reports">Active Ingredients</span>
                              </span>
                            </div>
                          </li>
                        
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>


          
          <div class="slds-combobox_container slds-combobox-addon_end" data-id="container">
            <div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click" data-id="dropdown">

              <template if:false={hasItemSelected}>
                <div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none">
                  <input onkeyup={handleSearch} type="text" class="slds-input slds-combobox__input" id="combobox-id-1" aria-autocomplete="list" aria-controls="listbox-id-1" aria-expanded="false" aria-haspopup="listbox"  role="combobox" placeholder="Search..." />
                  <span class="slds-icon_container slds-icon-utility-search slds-input__icon slds-input__icon_right">
                      <lightning-icon icon-name="utility:search" alternative-text="Search" title="Search" size="xx-small"></lightning-icon>
                  </span>
                </div>
              </template>

              <template if:true={hasItemSelected}>
                <lightning-pill label={itemDescription} onremove={handleRemove}>
                  <lightning-icon icon-name="utility:recipe" alternative-text={itemDescription}></lightning-icon>
                </lightning-pill>
              </template>

              <template if:true={isLoaded}>
                <c-pharma-cloud-drop-down dropdown-list={listForDropDown} onselect={toogleSelect}></c-pharma-cloud-drop-down>
              </template>
            
            </div>
          </div>
        </div>
      </div>
    </div>
    
</template>